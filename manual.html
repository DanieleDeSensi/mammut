<!DOCTYPE html>
<html lang="en">
	<head>
	    <meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <meta name="description" content="">
	    <meta name="author" content="">
	
	    <title>Mammut</title>
	    
	    <!-- Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
	    <link href="css/bootstrap.min.css" rel="stylesheet">
	    
	
	    <!-- Custom CSS -->
	    <link href="css/freelancer.css" rel="stylesheet">
	    <link href="css/barstyles.css" rel="stylesheet">
	    
	    <script src="js/prettify.js"></script>
	    <link href="css/prettifydesert.css" rel="stylesheet">
	    
	    <!-- Custom Fonts -->
	    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
	    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
	
	    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	    <!--[if lt IE 9]>
	        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
	    <![endif]-->
	    
	    <style>
			*[id]:before { 
				display: block; 
				content: " "; 
				margin-top: -120px; 
				height: 120px; 
				visibility: hidden; 
			}
	    </style>

	</head>
	<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">Mammut</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li class="page-scroll">
                        <a href="manual.html">Tutorials</a>
                    </li>
                    <li class="page-scroll">
                        <a href="install.html">Install</a>
                    </li>
                    <li class="page-scroll">
                        <a href="contact.html">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>


	<!-- Begin Body -->
	<div class="container" style="">
		<div class="row" style="position:relative; top:60px">
  			<div class="col-md-3" id="leftCol">
	      			<ul class="nav nav-stacked navbar" id="sidebar">
	  				<li><a href="#intro">Introduction</a></li>
	  					<ul>
	  						<li><a href="#introlocal">Local management</a></li>
	  						<li><a href="#introremote">Remote management</a></li>
	  					</ul>
	  				<li><a href="#energy">Energy</a></li>
	  					<ul>
	  						<li><a href="#energyread">Read energy</a></li>
	  						<li><a href="#energytypes">Counters types</a></li>
	  						<li><a href="#energycpu">CPU counters</a></li>
	  					</ul>
	  				<li><a href="#frequency">Clock frequency</a></li>
	  				<li><a href="#topology">Topology</a></li>
	  				<li><a href="#tasks">Threads and processes</a></li>
	      			</ul>
      			</div>  
      			<div class="col-md-9" style="position:relative; top:30px">
              			<h2 id="intro">Introduction</h2>
              			<p>
                			Mammut is structured as a set of <i>modules</i>, each of them managing a specific set of functionalities.
                			In this page you will find instructions and tutorials on how to use the library.
                			The tutorials can also be found in the corrisponding folder on the 
                			<a href="https://github.com/DanieleDeSensi/mammut/blob/master/demo/" target="_blank">GitHub repository.</a><br/>
                		</p>
                		<h3 id="introlocal">Local management</h3>
				<p>The following code snippet shows how to initialise the library:</p>
				<pre class="prettyprint">
					
#include &lt;mammut/mammut.hpp&gt;
using namespace mammut;
int main(int argc, char** argv){
    Mammut m;
}
				</pre>
				
				<h3 id="introremote">Remote management</h3>
				<p>
                			If you need to monitor a machine different from the one on which the
                			code is running, you simply need to specify the address of that machine,
                			as in the following snippet:
        			</p>
				<pre class="prettyprint">
					
Mammut m(new CommunicatorTcp(remoteMachineAddress, remoteMachinePort));
				</pre>
                		<p>
                			In this case, a <a href="server.html">Mammut server</a> should run on the 
                			remote machine. Please notice that this is the only modification required
                			if you need to monitor a machine different from the local one. 
                			Once you instantiated Mammut, you can require handlers to the different
                			modules. In the following we will describe each module separately, showing
                			the main features provided and how to use them.
              			</p>
              			
              			<hr class="col-md-12">

              			<h2 id="energy">Energy</h2>
		              	<p>
		                The energy module allows to read the energy consumption of the machine. This
		                feature is currently supported on the following architectures:
		                </p>
		                <ul>
		                	<li style="font-size:18px;"><b>Intel SandyBridge, IvyBridge and Haswell</b>. For these architectures, 
		                	    it is possible to read energy consumption of each CPU, of the cores on the CPU,
		                	    of the DRAM controller and of the integrated graphic card. On some of these 
		                	    machines DRAM or integrated graphic counters may not be available. To use the 
		                	    energy counters, the msr module must be loaded. A <code>sudo modprobe msr</code> 
		                	    should be enough to let it work.</li>
					<li style="font-size:18px;"><a href="http://www.hardkernel.com/main/main.php" target="_blank">
					    Odroid</a> machines. For these architectures, it is possible to read the total energy 
					    consumption if a 
					    <a href="http://odroid.com/dokuwiki/doku.php?id=en:odroidsmartpower" target="_blank">SmartPower</a>
					    is connected to the machine.</li>
					<li style="font-size:18px;"><b>Other machines</b> with a power supply voltage between <b>3.0V and 5.25V</b>. 
					    For these machines, it is possible to read the total energy consumption if a 
					    SmartPower is connected to the machine, similarly to the previous point.</li>
		                </ul>
		                <h3 id="energyread">Read energy</h3>
		                <p>
		               	The following code snippet shows how to read energy consumption. 
		              	</p>
		              	<pre id="#joules" class="prettyprint linenums">
#include &lt;mammut/mammut.hpp&gt;

#include &lt;cassert&gt;
#include &lt;iostream&gt;
#include &lt;unistd.h&gt;

using namespace mammut;
using namespace mammut::energy;
using namespace std;

int main(int argc, char** argv){
    Mammut m;
    Energy* energy = m.getInstanceEnergy();
    Joules j;

    Counter* counter = energy->getCounter();
    if(!counter){
        cout << "Power counters not available on this machine." << endl;
        return -1;
    }

    counter->reset();
    sleep(2);
    j = counter->getJoules();
    cout << j << " joules consumed in the last 2 seconds." << endl;

    counter->reset();
    sleep(4);
    j = counter->getJoules();
    cout << j << " joules consumed in the last 4 seconds." << endl;
}
				</pre>
				<p>First of all, an handler to the energy module is obtained (line 13). Then,  
				we require an energy counter (line 16). After that, we measure a code section
				(lines 22-24). Eventually, we reset the energy counter and we measure another
				code section (lines 27-29).
				</p>
				
				<div class="alert alert-block alert-error">
     					<h4 class="alert-heading">Attention!</h4>
     					Reading the energy consumption may require running
		                      	the application with <code>sudo</code> rights.
     				</div>
       
				
				<h3 id="energytypes">Counter types</h3>
				<h3 id="energycpu">CPU counters</h3>

		              	<div class="row">
		                  <div class="col-md-6">
		                    <div class="panel panel-default">
		                      <div class="panel-heading"><h3>Warning</h3></div>
		                      <div class="panel-body">Reading the energy consumption may require running
		                      the application with sudoer rights.
		                      </div>
		                    </div>
		                  </div>
		                  <div class="col-md-6">
		                      <div class="panel panel-default">
		                      <div class="panel-heading"><h3>Warning</h3></div>
		                      <div class="panel-body">On Intel architectures, the <code>msr</code> kernel
		                      module needs to be loaded.
		                      </div>
		                    </div>
		                  </div>  
		              	</div>
		              
		              	<hr>
		              
		              	<h2 id="sec2">Section 2</h2>
		              	<p>
		                Rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae 
		                dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia cor magni dolores 
		                eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, 
		                sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. 
		                Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut!
		              	</p>
		              	<div class="row">
		              		<div class="col-md-4"><img src="//placehold.it/300x300" class="img-responsive"></div>
		                  	<div class="col-md-4"><img src="//placehold.it/300x300" class="img-responsive"></div>
		                  	<div class="col-md-4"><img src="//placehold.it/300x300" class="img-responsive"></div>
		              	</div>
		              
		              	<hr>
		              
		              	<h2 id="sec3">Section 3</h2>
		      			Images are responsive sed @mdo but sum are more fun peratis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, 
		                totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae 
		                dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia cor magni dolores 
		                eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, 
		                sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. 
		                Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut..
		              	<br>
		                Fos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, 
		                sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. 
		                Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut..
		              
		              
		              	<h2 id="sec4">Section 4</h2>
		      			Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, 
		                totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae 
		                dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia cor magni dolores 
		                eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, 
		                sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. 
		                Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut
		      		</div> 
		  	</div>
		</div>



	<!-- script references -->
	    <!-- jQuery -->
	    <script src="js/jquery.js"></script>
	
	    <!-- Bootstrap Core JavaScript -->
	    <script src="js/bootstrap.min.js"></script>
	
	    <!-- Plugin JavaScript -->
	    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
	    <script src="js/classie.js"></script>
	    <script src="js/cbpAnimatedHeader.js"></script>
	
	    <!-- Contact Form JavaScript -->
	    <script src="js/jqBootstrapValidation.js"></script>
	
	    <!-- Custom Theme JavaScript -->
	    <script src="js/freelancer.js"></script>
	    <script src="js/barscripts.js"></script>
	    
	    <script type="text/javascript">
	        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	    </script>
	    <script type="text/javascript">
	        try {
	            var pageTracker = _gat._getTracker("UA-74455716-1");
	            pageTracker._trackPageview();
	        } catch(err) {}
	    </script>
	    
	    <script type="text/javascript">
	        $( window ).load(function() {   
	            boxes = $('.col-sm-4');
	            maxHeight = Math.max.apply(
	            Math, boxes.map(function() {
	            return $(this).height();
	            }).get());
	            boxes.height(maxHeight);
	            $('.col-sm-12 .panel').height(maxHeight/2-22);//22 = 20 (bottom-margin) + 2 *1 (border)
	        });
	        
	        
	        ! function ($) {
	        	$(function () {
	            		window.prettyPrint && prettyPrint()
	        	})
    		}(window.jQuery)
	    </script>
	</body>
</html>
